<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ubicaci贸n en tiempo real</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <h2> Mi ubicaci贸n en tiempo real</h2>
    <a href="#" onclick="seguirUbicacion()">Activar seguimiento</a>
    <p id="resultado"></p>

    <script>
        function seguirUbicacion() {
            const resultado = document.getElementById("resultado");

            if (navigator.geolocation) {
                navigator.geolocation.watchPosition(
                    function(posicion) {
                        const lat = posicion.coords.latitude;
                        const lon = posicion.coords.longitude;

                        // Mostrar en pantalla
                        resultado.innerHTML = `
                            Latitud: ${lat}<br>
                            Longitud: ${lon}<br>
                            <a href="https://www.google.com/maps?q=${lat},${lon}" target="_blank">
                                Ver en Google Maps
                            </a>
                        `;

                        //  Enviar ubicaci贸n a tu servidor o webhook
                        fetch("https://webhook.site/tu-url-unica", {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ latitud: lat, longitud: lon, timestamp: new Date() })
                        });
                    },
                    function(error) {
                        const mensajes = {
                            1: "El usuario neg贸 el permiso de ubicaci贸n.",
                            2: "La informaci贸n de ubicaci贸n no est谩 disponible.",
                            3: "La solicitud de ubicaci贸n expir贸.",
                        };
                        resultado.innerHTML = mensajes[error.code] || "Ocurri贸 un error desconocido.";
                    },
                    { enableHighAccuracy: true, maximumAge: 0 }
                );
            } else {
                resultado.innerHTML = "La geolocalizaci贸n no es soportada por este navegador.";
            }
        }
    </script>
</body>
</html>
